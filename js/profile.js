$(function(){$('#edit-form').submit(function(){var email=$(this).find('#edit-email');var current_password=$(this).find('#edit-current-password');var new_password=$(this).find('#edit-new-password');var confirm_new_password=$(this).find('#edit-confirm-new-password');if(!/^.{6,320}$/.test(email.val())||!/^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\.[a-zA-Z0-9-.]+$/.test(email.val())){email.focus();return false}if(!/^.{6,50}$/.test(current_password.val())){current_password.focus();return false}if(!/^(.{0}|.{6,50})$/.test(new_password.val())){new_password.focus();return false}if(new_password.val()!=confirm_new_password.val()){confirm_new_password.focus();return false}$.post({url:'/profile/edit',data:{'email':email.val(),'password':current_password.val(),'new-password':new_password.val(),},dataType:'json',success:function(res){switch(res.status){case'o':show_alert($('.alert-parent'),'success','<b>Success!</b> Please wait while you are redirected.');location.replace('/profile');break;case'l':show_alert($('.alert-parent'),'warning','<b>Warning!</b> You\'re not logged in. Please login first.');break;case'e':show_alert($('.alert-parent'),'warning','<b>Warning!</b> This email is already exists.');$('#join-email').focus();break;case'p':show_alert($('.alert-parent'),'danger','<b>Failed!</b> This password id wrong.');$('#edit-current-password').focus();break;default:show_alert($('.alert-parent'),'danger','<b>Error!</b> Please try again.')}},error:function(){show_alert($('.alert-parent'),'danger','<b>Error!</b> Please try again.')}});return false})});